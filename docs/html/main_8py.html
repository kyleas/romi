<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('main_8py.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main execution file for the <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a> autonomous navigation project.  
<a href="#details">More...</a></p>

<p><a href="main_8py_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3898291b13bc49e1c4d3859b2071abfe" id="r_a3898291b13bc49e1c4d3859b2071abfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3898291b13bc49e1c4d3859b2071abfe">main.task1_main</a> (shares)</td></tr>
<tr class="memdesc:a3898291b13bc49e1c4d3859b2071abfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which controls user inputs and data logging.  <br /></td></tr>
<tr class="separator:a3898291b13bc49e1c4d3859b2071abfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2761433ea92d27cdf41d774ef10220fe" id="r_a2761433ea92d27cdf41d774ef10220fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2761433ea92d27cdf41d774ef10220fe">main.task2_left_motor_controller</a> (shares)</td></tr>
<tr class="memdesc:a2761433ea92d27cdf41d774ef10220fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which controls the left motor using <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> velocity control.  <br /></td></tr>
<tr class="separator:a2761433ea92d27cdf41d774ef10220fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7587f108dcb928de84aaf2644f8d8208" id="r_a7587f108dcb928de84aaf2644f8d8208"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7587f108dcb928de84aaf2644f8d8208">main.task3_right_motor_controller</a> (shares)</td></tr>
<tr class="memdesc:a7587f108dcb928de84aaf2644f8d8208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which controls the right motor using <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> velocity control.  <br /></td></tr>
<tr class="separator:a7587f108dcb928de84aaf2644f8d8208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40eddb145230fd0b6ebaa9d85a7d328c" id="r_a40eddb145230fd0b6ebaa9d85a7d328c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40eddb145230fd0b6ebaa9d85a7d328c">main.task4_path_follow</a> (shares)</td></tr>
<tr class="memdesc:a40eddb145230fd0b6ebaa9d85a7d328c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which controls path following for the <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a>.  <br /></td></tr>
<tr class="separator:a40eddb145230fd0b6ebaa9d85a7d328c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add828372675b1c9e6565da3c26f70023" id="r_add828372675b1c9e6565da3c26f70023"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add828372675b1c9e6565da3c26f70023">main.follow_line</a> (chassis, line_follower, cur_left_vel_share, cur_right_vel_share, left_vel_share, right_vel_share, max_vel_share)</td></tr>
<tr class="memdesc:add828372675b1c9e6565da3c26f70023"><td class="mdescLeft">&#160;</td><td class="mdescRight">IR-based line following helper function.  <br /></td></tr>
<tr class="separator:add828372675b1c9e6565da3c26f70023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee5a8002f0200a65242da9812fbdec0" id="r_abee5a8002f0200a65242da9812fbdec0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abee5a8002f0200a65242da9812fbdec0">main.go_backward</a> (chassis, left_vel_share, right_vel_share, cur_left_vel, cur_right_vel, cur_heading, distance, continue_val)</td></tr>
<tr class="memdesc:abee5a8002f0200a65242da9812fbdec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves the robot backward by a certain distance.  <br /></td></tr>
<tr class="separator:abee5a8002f0200a65242da9812fbdec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9414a2b2f1daed28221d353cb095a7c0" id="r_a9414a2b2f1daed28221d353cb095a7c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9414a2b2f1daed28221d353cb095a7c0">main.follow_heading</a> (chassis, imu_obj, PID_Omega, chassis_vel_share, cur_left_vel_share, cur_right_vel_share, left_vel_share, right_vel_share, max_vel_share, target_heading)</td></tr>
<tr class="memdesc:a9414a2b2f1daed28221d353cb095a7c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maintains a specific heading using <a class="el" href="class_i_m_u.html" title="A class for interacting with a BNO055 IMU over I2C.">IMU</a> feedback and <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> control.  <br /></td></tr>
<tr class="separator:a9414a2b2f1daed28221d353cb095a7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef812866eef08bec2fae312b26c55696" id="r_aef812866eef08bec2fae312b26c55696"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef812866eef08bec2fae312b26c55696">main.follow_turn</a> (chassis, imu_obj, PID_Omega, left_vel_share, right_vel_share, max_vel_share, turn_angle, continue_val)</td></tr>
<tr class="memdesc:aef812866eef08bec2fae312b26c55696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements an in-place turn to a specific heading.  <br /></td></tr>
<tr class="separator:aef812866eef08bec2fae312b26c55696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d15d40756fca616210fcfd4d290b17" id="r_aa2d15d40756fca616210fcfd4d290b17"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2d15d40756fca616210fcfd4d290b17">main.task5_bumper</a> ()</td></tr>
<tr class="memdesc:aa2d15d40756fca616210fcfd4d290b17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple bumper task to demonstrate emergency stop or exit.  <br /></td></tr>
<tr class="separator:aa2d15d40756fca616210fcfd4d290b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0456cb15cb03d0782a60ebea1c6e6655" id="r_a0456cb15cb03d0782a60ebea1c6e6655"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0456cb15cb03d0782a60ebea1c6e6655">main.share_motor_controller_period</a></td></tr>
<tr class="separator:a0456cb15cb03d0782a60ebea1c6e6655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3538bf858b55ad25f6aa62bc0a59aa" id="r_a4b3538bf858b55ad25f6aa62bc0a59aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b3538bf858b55ad25f6aa62bc0a59aa">main.share_left_effort</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Left_Effort&quot;)</td></tr>
<tr class="separator:a4b3538bf858b55ad25f6aa62bc0a59aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad083741762dd7eca5deef385687f6e2e" id="r_ad083741762dd7eca5deef385687f6e2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad083741762dd7eca5deef385687f6e2e">main.share_left_run_dur</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Left_Run_Dur&quot;)</td></tr>
<tr class="separator:ad083741762dd7eca5deef385687f6e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75aff43a1280bd518cb4cfc2b3990181" id="r_a75aff43a1280bd518cb4cfc2b3990181"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75aff43a1280bd518cb4cfc2b3990181">main.share_right_effort</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Right_Effort&quot;)</td></tr>
<tr class="separator:a75aff43a1280bd518cb4cfc2b3990181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab11938f316cca0a507bc9652a1421ce2" id="r_ab11938f316cca0a507bc9652a1421ce2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab11938f316cca0a507bc9652a1421ce2">main.share_right_run_dur</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Right_Run_Dur&quot;)</td></tr>
<tr class="separator:ab11938f316cca0a507bc9652a1421ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e2a6db2039ceb5e06ab4c5c4c9c7905" id="r_a6e2a6db2039ceb5e06ab4c5c4c9c7905"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e2a6db2039ceb5e06ab4c5c4c9c7905">main.q_len</a> = 500</td></tr>
<tr class="separator:a6e2a6db2039ceb5e06ab4c5c4c9c7905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e7bff739a6d43426790064d7604e67d" id="r_a0e7bff739a6d43426790064d7604e67d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e7bff739a6d43426790064d7604e67d">main.queue_left_position</a></td></tr>
<tr class="separator:a0e7bff739a6d43426790064d7604e67d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac132acf5ce2695046aab857080b66583" id="r_ac132acf5ce2695046aab857080b66583"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac132acf5ce2695046aab857080b66583">main.queue_left_velocity</a></td></tr>
<tr class="separator:ac132acf5ce2695046aab857080b66583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2346a11ae4ce661ea9831ecf2448a953" id="r_a2346a11ae4ce661ea9831ecf2448a953"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2346a11ae4ce661ea9831ecf2448a953">main.queue_right_position</a></td></tr>
<tr class="separator:a2346a11ae4ce661ea9831ecf2448a953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0b9312c38b796722d0c99246ce7ab5" id="r_ada0b9312c38b796722d0c99246ce7ab5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada0b9312c38b796722d0c99246ce7ab5">main.queue_right_velocity</a></td></tr>
<tr class="separator:ada0b9312c38b796722d0c99246ce7ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01cd60f30f626766e9e8b21e509ce05c" id="r_a01cd60f30f626766e9e8b21e509ce05c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01cd60f30f626766e9e8b21e509ce05c">main.share_max_vel</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Max_Vel&quot;)</td></tr>
<tr class="separator:a01cd60f30f626766e9e8b21e509ce05c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7bc4ff58722c6affeee262012fcf55c" id="r_af7bc4ff58722c6affeee262012fcf55c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7bc4ff58722c6affeee262012fcf55c">main.share_max_eff</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Max_Eff&quot;)</td></tr>
<tr class="separator:af7bc4ff58722c6affeee262012fcf55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf225447dd3b4f71c7c58cae495c7abf" id="r_aaf225447dd3b4f71c7c58cae495c7abf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaf225447dd3b4f71c7c58cae495c7abf">main.share_right_vel</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Right_Vel&quot;)</td></tr>
<tr class="separator:aaf225447dd3b4f71c7c58cae495c7abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be8f3bce68f849361ad0518974ac5d4" id="r_a2be8f3bce68f849361ad0518974ac5d4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2be8f3bce68f849361ad0518974ac5d4">main.share_left_vel</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Left_Vel&quot;)</td></tr>
<tr class="separator:a2be8f3bce68f849361ad0518974ac5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f5ea24393ebcd9c0dc95fe5b1566474" id="r_a7f5ea24393ebcd9c0dc95fe5b1566474"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f5ea24393ebcd9c0dc95fe5b1566474">main.share_dir</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Dir&quot;)</td></tr>
<tr class="separator:a7f5ea24393ebcd9c0dc95fe5b1566474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2900c777cd73ccd2e665b2603ad46578" id="r_a2900c777cd73ccd2e665b2603ad46578"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2900c777cd73ccd2e665b2603ad46578">main.share_chassis_vel</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Chassis_Vel&quot;)</td></tr>
<tr class="separator:a2900c777cd73ccd2e665b2603ad46578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256212a1b054fb7db00764673da653e3" id="r_a256212a1b054fb7db00764673da653e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a256212a1b054fb7db00764673da653e3">main.share_cur_left_vel</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Cur_Left_Vel&quot;)</td></tr>
<tr class="separator:a256212a1b054fb7db00764673da653e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08923618ea52835930772297cbca5586" id="r_a08923618ea52835930772297cbca5586"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08923618ea52835930772297cbca5586">main.share_cur_right_vel</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Cur_Right_Vel&quot;)</td></tr>
<tr class="separator:a08923618ea52835930772297cbca5586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47776161cc656417f2687bd51eaec13" id="r_aa47776161cc656417f2687bd51eaec13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa47776161cc656417f2687bd51eaec13">main.share_wait</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Wait&quot;)</td></tr>
<tr class="separator:aa47776161cc656417f2687bd51eaec13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe9060a06cf51d73765d64230ef0c465" id="r_abe9060a06cf51d73765d64230ef0c465"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe9060a06cf51d73765d64230ef0c465">main.share_stop</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Stop&quot;)</td></tr>
<tr class="separator:abe9060a06cf51d73765d64230ef0c465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1648ed9341de347f664c2c000bd537c" id="r_ac1648ed9341de347f664c2c000bd537c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac1648ed9341de347f664c2c000bd537c">main.share_mode</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Mode&quot;)</td></tr>
<tr class="separator:ac1648ed9341de347f664c2c000bd537c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2e61c14a17da80ea8b6de8c12d06b6c" id="r_ab2e61c14a17da80ea8b6de8c12d06b6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab2e61c14a17da80ea8b6de8c12d06b6c">main.share_heading</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Heading&quot;)</td></tr>
<tr class="separator:ab2e61c14a17da80ea8b6de8c12d06b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1b6e7dc901fe09579cd581a2f71bcf" id="r_a7b1b6e7dc901fe09579cd581a2f71bcf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b1b6e7dc901fe09579cd581a2f71bcf">main.share_continue</a> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Continue&quot;)</td></tr>
<tr class="separator:a7b1b6e7dc901fe09579cd581a2f71bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4b8f4290f8d32e70654f6deb864787f" id="r_af4b8f4290f8d32e70654f6deb864787f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4b8f4290f8d32e70654f6deb864787f">main.task1</a></td></tr>
<tr class="separator:af4b8f4290f8d32e70654f6deb864787f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d189b8f9eb3784cf7d4e5c3241b562" id="r_a99d189b8f9eb3784cf7d4e5c3241b562"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99d189b8f9eb3784cf7d4e5c3241b562">main.task2</a></td></tr>
<tr class="separator:a99d189b8f9eb3784cf7d4e5c3241b562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120516a5d42c212c898d4616d266077a" id="r_a120516a5d42c212c898d4616d266077a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a120516a5d42c212c898d4616d266077a">main.task3</a></td></tr>
<tr class="separator:a120516a5d42c212c898d4616d266077a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ee3c5b5359f76becfe27534e82085f" id="r_ac0ee3c5b5359f76becfe27534e82085f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0ee3c5b5359f76becfe27534e82085f">main.task4</a></td></tr>
<tr class="separator:ac0ee3c5b5359f76becfe27534e82085f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ec9e490c402876467b9fdadecc93e8" id="r_a11ec9e490c402876467b9fdadecc93e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11ec9e490c402876467b9fdadecc93e8">main.task5</a></td></tr>
<tr class="separator:a11ec9e490c402876467b9fdadecc93e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40f26627816d82bd72f3a65ed8d82d5" id="r_ab40f26627816d82bd72f3a65ed8d82d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab40f26627816d82bd72f3a65ed8d82d5">main.Motor_Right</a></td></tr>
<tr class="separator:ab40f26627816d82bd72f3a65ed8d82d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac444a2dc99b98409a8b2fcff38ae4b6f" id="r_ac444a2dc99b98409a8b2fcff38ae4b6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac444a2dc99b98409a8b2fcff38ae4b6f">main.Motor_Left</a></td></tr>
<tr class="separator:ac444a2dc99b98409a8b2fcff38ae4b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main execution file for the <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a> autonomous navigation project. </p>
<ul>
<li>Initializes tasks for motor control, path following, and bumper handling. <br  />
</li>
<li>Starts the scheduler to manage real-time control of the robot. <br  />
</li>
<li>Demonstrates line following, IMU-based heading control, and motor <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> velocity control.</li>
</ul>
<dl class="section author"><dt>Author</dt><dd><ul>
<li>Toby Sagi</li>
<li>Kyle Schumacher</li>
</ul>
</dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025 </dd></dl>

<p class="definition">Definition in file <a class="el" href="main_8py_source.html">main.py</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9414a2b2f1daed28221d353cb095a7c0" name="a9414a2b2f1daed28221d353cb095a7c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9414a2b2f1daed28221d353cb095a7c0">&#9670;&#160;</a></span>follow_heading()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.follow_heading </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>chassis</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>imu_obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>PID_Omega</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>chassis_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cur_left_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cur_right_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>left_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>right_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>max_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>target_heading</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maintains a specific heading using <a class="el" href="class_i_m_u.html" title="A class for interacting with a BNO055 IMU over I2C.">IMU</a> feedback and <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> control. </p>
<ul>
<li>Reads the current heading from the <a class="el" href="class_i_m_u.html" title="A class for interacting with a BNO055 IMU over I2C.">IMU</a>. <br  />
</li>
<li>Computes heading error and uses <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> to calculate angular velocity (omega). <br  />
</li>
<li>Converts chassis velocity and chassis_omega into left/right velocities.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chassis</td><td>: <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a> chassis object. </td></tr>
    <tr><td class="paramname">imu_obj</td><td>: <a class="el" href="class_i_m_u.html" title="A class for interacting with a BNO055 IMU over I2C.">IMU</a> object for heading data. </td></tr>
    <tr><td class="paramname">PID_Omega</td><td>: <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> controller for angular velocity. </td></tr>
    <tr><td class="paramname">chassis_vel_share</td><td>: Desired forward velocity of the chassis. </td></tr>
    <tr><td class="paramname">cur_left_vel_share</td><td>Current left motor velocity. </td></tr>
    <tr><td class="paramname">cur_right_vel_share</td><td>Current right motor velocity. </td></tr>
    <tr><td class="paramname">left_vel_share</td><td>: Shared left motor velocity to be updated. </td></tr>
    <tr><td class="paramname">right_vel_share</td><td>: Shared right motor velocity to be updated. </td></tr>
    <tr><td class="paramname">max_vel_share</td><td>: Shared maximum velocity possible. </td></tr>
    <tr><td class="paramname">target_heading</td><td>: Target heading in degrees. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00573">573</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  576</span>                   max_vel_share, target_heading):</div>
<div class="line"><span class="lineno">  577</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  578</span><span class="stringliteral">    @brief Maintains a specific heading using IMU feedback and PID control.</span></div>
<div class="line"><span class="lineno">  579</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  580</span><span class="stringliteral">      - Reads the current heading from the IMU.  </span></div>
<div class="line"><span class="lineno">  581</span><span class="stringliteral">      - Computes heading error and uses PID to calculate angular velocity (omega).  </span></div>
<div class="line"><span class="lineno">  582</span><span class="stringliteral">      - Converts chassis velocity and chassis_omega into left/right velocities.</span></div>
<div class="line"><span class="lineno">  583</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  584</span><span class="stringliteral">    @param chassis           : Romi chassis object.</span></div>
<div class="line"><span class="lineno">  585</span><span class="stringliteral">    @param imu_obj           : IMU object for heading data.</span></div>
<div class="line"><span class="lineno">  586</span><span class="stringliteral">    @param PID_Omega         : PID controller for angular velocity.</span></div>
<div class="line"><span class="lineno">  587</span><span class="stringliteral">    @param chassis_vel_share : Desired forward velocity of the chassis.</span></div>
<div class="line"><span class="lineno">  588</span><span class="stringliteral">    @param cur_left_vel_share: Current left motor velocity.</span></div>
<div class="line"><span class="lineno">  589</span><span class="stringliteral">    @param cur_right_vel_share: Current right motor velocity.</span></div>
<div class="line"><span class="lineno">  590</span><span class="stringliteral">    @param left_vel_share    : Shared left motor velocity to be updated.</span></div>
<div class="line"><span class="lineno">  591</span><span class="stringliteral">    @param right_vel_share   : Shared right motor velocity to be updated.</span></div>
<div class="line"><span class="lineno">  592</span><span class="stringliteral">    @param max_vel_share     : Shared maximum velocity possible.</span></div>
<div class="line"><span class="lineno">  593</span><span class="stringliteral">    @param target_heading    : Target heading in degrees.</span></div>
<div class="line"><span class="lineno">  594</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  595</span>    chassis_vel = chassis_vel_share.get()</div>
<div class="line"><span class="lineno">  596</span>    current_heading = imu_obj.read_euler_heading()</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>    cur_left_vel = cur_left_vel_share.get()</div>
<div class="line"><span class="lineno">  599</span>    cur_right_vel = cur_right_vel_share.get()</div>
<div class="line"><span class="lineno">  600</span>    chassis.update(cur_left_vel, cur_right_vel, current_heading)</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>    <span class="comment"># Calculate heading error (normalize to [-180, 180])</span></div>
<div class="line"><span class="lineno">  603</span>    error = target_heading - chassis.get_angle()</div>
<div class="line"><span class="lineno">  604</span>    <span class="keywordflow">if</span> error &gt; 180:</div>
<div class="line"><span class="lineno">  605</span>        error -= 360</div>
<div class="line"><span class="lineno">  606</span>    <span class="keywordflow">elif</span> error &lt; -180:</div>
<div class="line"><span class="lineno">  607</span>        error += 360</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>    chassis_omega = -1 * PID_Omega.update_error(error)</div>
<div class="line"><span class="lineno">  610</span>    left_vel, right_vel = chassis.calc_des_wheel_vel(chassis_vel, chassis_omega, max_vel_share)</div>
<div class="line"><span class="lineno">  611</span>    left_vel_share.put(left_vel)</div>
<div class="line"><span class="lineno">  612</span>    right_vel_share.put(right_vel)</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="add828372675b1c9e6565da3c26f70023" name="add828372675b1c9e6565da3c26f70023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add828372675b1c9e6565da3c26f70023">&#9670;&#160;</a></span>follow_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.follow_line </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>chassis</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>line_follower</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cur_left_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cur_right_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>left_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>right_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>max_vel_share</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IR-based line following helper function. </p>
<ul>
<li>Uses <a class="el" href="class_i_r.html" title="IR sensor interface class for line following on the ROMI chassis.">IR</a> sensor readings to adjust left/right wheel velocities. <br  />
</li>
<li>Updates the chassis object with current velocities for tracking.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chassis</td><td>: <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a> chassis object to track distance, heading, etc. </td></tr>
    <tr><td class="paramname">line_follower</td><td>: <a class="el" href="class_line_follow.html" title="Class that computes left/right motor velocities to keep a line sensor&#39;s centroid at center.">LineFollow</a> object handling <a class="el" href="class_i_r.html" title="IR sensor interface class for line following on the ROMI chassis.">IR</a> sensor feedback. </td></tr>
    <tr><td class="paramname">cur_left_vel_share</td><td>: Shared current left motor velocity. </td></tr>
    <tr><td class="paramname">cur_right_vel_share</td><td>: Shared current right motor velocity. </td></tr>
    <tr><td class="paramname">left_vel_share</td><td>: Shared desired left motor velocity (to be updated by this function). </td></tr>
    <tr><td class="paramname">right_vel_share</td><td>Shared desired right motor velocity (to be updated by this function). </td></tr>
    <tr><td class="paramname">max_vel_share</td><td>: Shared maximum velocity for line following. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00509">509</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  510</span>                left_vel_share, right_vel_share, max_vel_share):</div>
<div class="line"><span class="lineno">  511</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  512</span><span class="stringliteral">    @brief IR-based line following helper function.</span></div>
<div class="line"><span class="lineno">  513</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  514</span><span class="stringliteral">      - Uses IR sensor readings to adjust left/right wheel velocities.  </span></div>
<div class="line"><span class="lineno">  515</span><span class="stringliteral">      - Updates the chassis object with current velocities for tracking.</span></div>
<div class="line"><span class="lineno">  516</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  517</span><span class="stringliteral">    @param chassis        : Romi chassis object to track distance, heading, etc.</span></div>
<div class="line"><span class="lineno">  518</span><span class="stringliteral">    @param line_follower  : LineFollow object handling IR sensor feedback.</span></div>
<div class="line"><span class="lineno">  519</span><span class="stringliteral">    @param cur_left_vel_share  : Shared current left motor velocity.</span></div>
<div class="line"><span class="lineno">  520</span><span class="stringliteral">    @param cur_right_vel_share : Shared current right motor velocity.</span></div>
<div class="line"><span class="lineno">  521</span><span class="stringliteral">    @param left_vel_share : Shared desired left motor velocity (to be updated by this function).</span></div>
<div class="line"><span class="lineno">  522</span><span class="stringliteral">    @param right_vel_share: Shared desired right motor velocity (to be updated by this function).</span></div>
<div class="line"><span class="lineno">  523</span><span class="stringliteral">    @param max_vel_share  : Shared maximum velocity for line following.</span></div>
<div class="line"><span class="lineno">  524</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  525</span>    cur_left_vel = cur_left_vel_share.get()</div>
<div class="line"><span class="lineno">  526</span>    cur_right_vel = cur_right_vel_share.get()</div>
<div class="line"><span class="lineno">  527</span>    chassis.update(cur_left_vel, cur_right_vel, chassis.get_angle())</div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>    left_vel, right_vel = line_follower.update(max_vel_share)</div>
<div class="line"><span class="lineno">  530</span>    left_vel_share.put(left_vel)</div>
<div class="line"><span class="lineno">  531</span>    right_vel_share.put(right_vel)</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aef812866eef08bec2fae312b26c55696" name="aef812866eef08bec2fae312b26c55696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef812866eef08bec2fae312b26c55696">&#9670;&#160;</a></span>follow_turn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.follow_turn </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>chassis</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>imu_obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>PID_Omega</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>left_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>right_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>max_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>turn_angle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>continue_val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implements an in-place turn to a specific heading. </p>
<ul>
<li>Uses a generator approach to step through the turn each iteration. <br  />
</li>
<li>Zero linear velocity and apply an angular velocity until the desired heading is reached.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chassis</td><td>: <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a> chassis object. </td></tr>
    <tr><td class="paramname">imu_obj</td><td>: <a class="el" href="class_i_m_u.html" title="A class for interacting with a BNO055 IMU over I2C.">IMU</a> object to measure heading. </td></tr>
    <tr><td class="paramname">PID_Omega</td><td>: <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> controller for angular velocity. </td></tr>
    <tr><td class="paramname">left_vel_share</td><td>Shared left motor velocity to be updated. </td></tr>
    <tr><td class="paramname">right_vel_share</td><td>Shared right motor velocity to be updated. </td></tr>
    <tr><td class="paramname">max_vel_share</td><td>: Shared max velocity for limiting turning speed. </td></tr>
    <tr><td class="paramname">turn_angle</td><td>: Relative target heading to turn to (e.g., +90 deg). </td></tr>
    <tr><td class="paramname">continue_val</td><td>: Shared flag set to 1 when turn is complete. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00615">615</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  616</span>                max_vel_share, turn_angle, continue_val):</div>
<div class="line"><span class="lineno">  617</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  618</span><span class="stringliteral">    @brief Implements an in-place turn to a specific heading.</span></div>
<div class="line"><span class="lineno">  619</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  620</span><span class="stringliteral">      - Uses a generator approach to step through the turn each iteration.  </span></div>
<div class="line"><span class="lineno">  621</span><span class="stringliteral">      - Zero linear velocity and apply an angular velocity until the desired heading is reached.</span></div>
<div class="line"><span class="lineno">  622</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  623</span><span class="stringliteral">    @param chassis       : Romi chassis object.</span></div>
<div class="line"><span class="lineno">  624</span><span class="stringliteral">    @param imu_obj       : IMU object to measure heading.</span></div>
<div class="line"><span class="lineno">  625</span><span class="stringliteral">    @param PID_Omega     : PID controller for angular velocity.</span></div>
<div class="line"><span class="lineno">  626</span><span class="stringliteral">    @param left_vel_share: Shared left motor velocity to be updated.</span></div>
<div class="line"><span class="lineno">  627</span><span class="stringliteral">    @param right_vel_share: Shared right motor velocity to be updated.</span></div>
<div class="line"><span class="lineno">  628</span><span class="stringliteral">    @param max_vel_share : Shared max velocity for limiting turning speed.</span></div>
<div class="line"><span class="lineno">  629</span><span class="stringliteral">    @param turn_angle    : Relative target heading to turn to (e.g., +90 deg).</span></div>
<div class="line"><span class="lineno">  630</span><span class="stringliteral">    @param continue_val  : Shared flag set to 1 when turn is complete.</span></div>
<div class="line"><span class="lineno">  631</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  632</span>    print(<span class="stringliteral">&quot;Initiating turn to angle:&quot;</span>, turn_angle)</div>
<div class="line"><span class="lineno">  633</span>    target_heading = turn_angle</div>
<div class="line"><span class="lineno">  634</span>    initial_distance = chassis.get_distance()</div>
<div class="line"><span class="lineno">  635</span>    continue_val.put(0)</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  638</span>        current_heading = imu_obj.read_euler_heading()</div>
<div class="line"><span class="lineno">  639</span>        chassis.update_angle(current_heading)</div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span>        error = target_heading - chassis.get_angle()</div>
<div class="line"><span class="lineno">  642</span>        <span class="keywordflow">if</span> error &gt; 180:</div>
<div class="line"><span class="lineno">  643</span>            error -= 360</div>
<div class="line"><span class="lineno">  644</span>        <span class="keywordflow">elif</span> error &lt; -180:</div>
<div class="line"><span class="lineno">  645</span>            error += 360</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>        <span class="keywordflow">if</span> abs(error) &lt; 3:</div>
<div class="line"><span class="lineno">  648</span>            print(<span class="stringliteral">&quot;Turn complete at heading:&quot;</span>, chassis.get_angle())</div>
<div class="line"><span class="lineno">  649</span>            left_vel_share.put(0)</div>
<div class="line"><span class="lineno">  650</span>            right_vel_share.put(0)</div>
<div class="line"><span class="lineno">  651</span>            chassis.set_distance(initial_distance)</div>
<div class="line"><span class="lineno">  652</span>            chassis.update_time()</div>
<div class="line"><span class="lineno">  653</span>            continue_val.put(1)</div>
<div class="line"><span class="lineno">  654</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>        chassis_omega = -1 * PID_Omega.update_error(error)</div>
<div class="line"><span class="lineno">  657</span>        left_vel, right_vel = chassis.calc_des_wheel_vel(0, chassis_omega, max_vel_share)</div>
<div class="line"><span class="lineno">  658</span>        left_vel_share.put(left_vel)</div>
<div class="line"><span class="lineno">  659</span>        right_vel_share.put(right_vel)</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>        <span class="keywordflow">yield</span></div>
<div class="line"><span class="lineno">  662</span> </div>
<div class="line"><span class="lineno">  663</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abee5a8002f0200a65242da9812fbdec0" name="abee5a8002f0200a65242da9812fbdec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee5a8002f0200a65242da9812fbdec0">&#9670;&#160;</a></span>go_backward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.go_backward </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>chassis</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>left_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>right_vel_share</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cur_left_vel</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cur_right_vel</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cur_heading</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>distance</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>continue_val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Moves the robot backward by a certain distance. </p>
<ul>
<li>Zeroes distance, then drives in reverse until distance traveled is met. <br  />
</li>
<li>Sets wheel velocities to negative values, and stops when the condition is reached.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chassis</td><td>: <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a> chassis object. </td></tr>
    <tr><td class="paramname">left_vel_share</td><td>: Shared left motor velocity control. </td></tr>
    <tr><td class="paramname">right_vel_share</td><td>Shared right motor velocity control. </td></tr>
    <tr><td class="paramname">cur_left_vel</td><td>: Current left motor velocity (unused). </td></tr>
    <tr><td class="paramname">cur_right_vel</td><td>: Current right motor velocity (unused). </td></tr>
    <tr><td class="paramname">cur_heading</td><td>: Current heading of the chassis. </td></tr>
    <tr><td class="paramname">distance</td><td>: Target distance to move backward (some distance metric). </td></tr>
    <tr><td class="paramname">continue_val</td><td>: Shared flag to resume path follow after backward motion. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00534">534</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  536</span>                distance, continue_val):</div>
<div class="line"><span class="lineno">  537</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  538</span><span class="stringliteral">    @brief Moves the robot backward by a certain distance.</span></div>
<div class="line"><span class="lineno">  539</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  540</span><span class="stringliteral">      - Zeroes distance, then drives in reverse until distance traveled is met.  </span></div>
<div class="line"><span class="lineno">  541</span><span class="stringliteral">      - Sets wheel velocities to negative values, and stops when the condition is reached.</span></div>
<div class="line"><span class="lineno">  542</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  543</span><span class="stringliteral">    @param chassis        : Romi chassis object.</span></div>
<div class="line"><span class="lineno">  544</span><span class="stringliteral">    @param left_vel_share : Shared left motor velocity control.</span></div>
<div class="line"><span class="lineno">  545</span><span class="stringliteral">    @param right_vel_share: Shared right motor velocity control.</span></div>
<div class="line"><span class="lineno">  546</span><span class="stringliteral">    @param cur_left_vel   : Current left motor velocity (unused).</span></div>
<div class="line"><span class="lineno">  547</span><span class="stringliteral">    @param cur_right_vel  : Current right motor velocity (unused).</span></div>
<div class="line"><span class="lineno">  548</span><span class="stringliteral">    @param cur_heading    : Current heading of the chassis.</span></div>
<div class="line"><span class="lineno">  549</span><span class="stringliteral">    @param distance       : Target distance to move backward (some distance metric).</span></div>
<div class="line"><span class="lineno">  550</span><span class="stringliteral">    @param continue_val   : Shared flag to resume path follow after backward motion.</span></div>
<div class="line"><span class="lineno">  551</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  552</span>    chassis.zero_distance()</div>
<div class="line"><span class="lineno">  553</span>    continue_val.put(0)</div>
<div class="line"><span class="lineno">  554</span>    print(<span class="stringliteral">&quot;Going backward.&quot;</span>)</div>
<div class="line"><span class="lineno">  555</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  556</span>        left_vel_share.put(-20)</div>
<div class="line"><span class="lineno">  557</span>        right_vel_share.put(-20)</div>
<div class="line"><span class="lineno">  558</span>        chassis.update(left_vel_share.get(), right_vel_share.get(), cur_heading)</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        error = distance + chassis.get_distance()</div>
<div class="line"><span class="lineno">  561</span>        <span class="keywordflow">if</span> error &lt; 0.001:</div>
<div class="line"><span class="lineno">  562</span>            print(<span class="stringliteral">&quot;Backward movement complete.&quot;</span>)</div>
<div class="line"><span class="lineno">  563</span>            left_vel_share.put(0)</div>
<div class="line"><span class="lineno">  564</span>            right_vel_share.put(0)</div>
<div class="line"><span class="lineno">  565</span>            chassis.zero_distance()</div>
<div class="line"><span class="lineno">  566</span>            chassis.update_time()</div>
<div class="line"><span class="lineno">  567</span>            continue_val.put(1)</div>
<div class="line"><span class="lineno">  568</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>        <span class="keywordflow">yield</span></div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3898291b13bc49e1c4d3859b2071abfe" name="a3898291b13bc49e1c4d3859b2071abfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3898291b13bc49e1c4d3859b2071abfe">&#9670;&#160;</a></span>task1_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task1_main </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which controls user inputs and data logging. </p>
<ul>
<li>Initializes motor control parameters.</li>
<li>Collects positional/velocity data from motors.</li>
<li>Logs data at each iteration until the run finishes.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares</td><td>A tuple of references to shares and queues used by this task:<ul>
<li>share_motor_controller_period : The sampling period for motor control (ms).</li>
<li>share_left_effort : Reference to the left motor effort share.</li>
<li>share_right_effort : Reference to the right motor effort share.</li>
<li>share_left_run_dur : Left motor run duration (ms).</li>
<li>share_left_run_dur : (Repeated) Right motor run duration (ms).</li>
<li>queue_left_position : Queue storing left motor positions.</li>
<li>queue_right_position : Queue storing right motor positions.</li>
<li>queue_left_velocity : Queue storing left motor velocities.</li>
<li>queue_right_velocity : Queue storing right motor velocities.</li>
<li>share_cur_left_vel : Current left motor velocity share.</li>
<li>share_cur_right_vel : Current right motor velocity share. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00036">36</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span><span class="keyword">def </span>task1_main(shares):</div>
<div class="line"><span class="lineno">   37</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">   38</span><span class="stringliteral">    @brief Task which controls user inputs and data logging.</span></div>
<div class="line"><span class="lineno">   39</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral">      - Initializes motor control parameters.</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">      - Collects positional/velocity data from motors.</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">      - Logs data at each iteration until the run finishes.</span></div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">    @param shares </span></div>
<div class="line"><span class="lineno">   45</span><span class="stringliteral">      A tuple of references to shares and queues used by this task:</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral">      - share_motor_controller_period : The sampling period for motor control (ms).</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">      - share_left_effort            : Reference to the left motor effort share.</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">      - share_right_effort           : Reference to the right motor effort share.</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">      - share_left_run_dur           : Left motor run duration (ms).</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">      - share_left_run_dur           : (Repeated) Right motor run duration (ms).</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">      - queue_left_position          : Queue storing left motor positions.</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">      - queue_right_position         : Queue storing right motor positions.</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">      - queue_left_velocity          : Queue storing left motor velocities.</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">      - queue_right_velocity         : Queue storing right motor velocities.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">      - share_cur_left_vel           : Current left motor velocity share.</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">      - share_cur_right_vel          : Current right motor velocity share.</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   58</span>    <span class="comment"># Unpack shares and queues</span></div>
<div class="line"><span class="lineno">   59</span>    share_motor_controller_period, \</div>
<div class="line"><span class="lineno">   60</span>    share_left_effort, \</div>
<div class="line"><span class="lineno">   61</span>    share_right_effort, \</div>
<div class="line"><span class="lineno">   62</span>    share_left_run_dur, \</div>
<div class="line"><span class="lineno">   63</span>    share_left_run_dur, \</div>
<div class="line"><span class="lineno">   64</span>    queue_left_position, \</div>
<div class="line"><span class="lineno">   65</span>    queue_right_position, \</div>
<div class="line"><span class="lineno">   66</span>    queue_left_velocity, \</div>
<div class="line"><span class="lineno">   67</span>    queue_right_velocity, \</div>
<div class="line"><span class="lineno">   68</span>    share_cur_left_vel, \</div>
<div class="line"><span class="lineno">   69</span>    share_cur_right_vel = shares</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    <span class="comment"># State machine definitions</span></div>
<div class="line"><span class="lineno">   72</span>    state = 0</div>
<div class="line"><span class="lineno">   73</span>    S0_INIT_PARAMS = 0</div>
<div class="line"><span class="lineno">   74</span>    S1_INIT_DATA_STORAGE = 1</div>
<div class="line"><span class="lineno">   75</span>    S2_RUN_AND_COLLECT_DATA = 2</div>
<div class="line"><span class="lineno">   76</span>    S3_PRINT_RESULTS = 3</div>
<div class="line"><span class="lineno">   77</span>    S4_HOLD = 4</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    effort = 0</div>
<div class="line"><span class="lineno">   80</span>    run_dur = 0</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">if</span> state == S0_INIT_PARAMS:</div>
<div class="line"><span class="lineno">   84</span>            print(<span class="stringliteral">&quot;T1 S0 - Initialize parameters.&quot;</span>)</div>
<div class="line"><span class="lineno">   85</span>            <span class="comment"># Example motor effort and duration</span></div>
<div class="line"><span class="lineno">   86</span>            effort = 25</div>
<div class="line"><span class="lineno">   87</span>            run_dur = 2000  <span class="comment"># ms</span></div>
<div class="line"><span class="lineno">   88</span>            state = S1_INIT_DATA_STORAGE</div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">elif</span> state == S1_INIT_DATA_STORAGE:</div>
<div class="line"><span class="lineno">   92</span>            print(<span class="stringliteral">&quot;T1 S1 - Preparing data storage.&quot;</span>)</div>
<div class="line"><span class="lineno">   93</span>            <span class="comment"># Calculate how many data points to store</span></div>
<div class="line"><span class="lineno">   94</span>            points = int(run_dur / share_motor_controller_period.get()) + 1</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>            <span class="comment"># Pre-allocate arrays (just a demonstration; commented out usage below)</span></div>
<div class="line"><span class="lineno">   97</span>            data_L_pos = array(<span class="stringliteral">&#39;H&#39;</span>, points * [0])</div>
<div class="line"><span class="lineno">   98</span>            data_R_pos = array(<span class="stringliteral">&#39;H&#39;</span>, points * [0])</div>
<div class="line"><span class="lineno">   99</span>            data_L_vel = array(<span class="stringliteral">&#39;f&#39;</span>, points * [0])</div>
<div class="line"><span class="lineno">  100</span>            data_R_vel = array(<span class="stringliteral">&#39;f&#39;</span>, points * [0])</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>            idx = 0</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>            <span class="comment"># Set shared variables for motor efforts and durations</span></div>
<div class="line"><span class="lineno">  105</span>            share_left_effort.put(effort)</div>
<div class="line"><span class="lineno">  106</span>            share_right_effort.put(effort)</div>
<div class="line"><span class="lineno">  107</span>            share_left_run_dur.put(run_dur)</div>
<div class="line"><span class="lineno">  108</span>            share_right_run_dur.put(run_dur)</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>            state = S2_RUN_AND_COLLECT_DATA</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>        <span class="keywordflow">elif</span> state == S2_RUN_AND_COLLECT_DATA:</div>
<div class="line"><span class="lineno">  114</span>            <span class="comment"># Continually check if motor run is finished &amp; queue is empty</span></div>
<div class="line"><span class="lineno">  115</span>            <span class="keywordflow">if</span> (share_left_run_dur.get() == 0 <span class="keywordflow">and</span> share_right_run_dur.get() == 0</div>
<div class="line"><span class="lineno">  116</span>                <span class="keywordflow">and</span> share_left_effort.get() == 0 <span class="keywordflow">and</span> share_right_effort.get() == 0</div>
<div class="line"><span class="lineno">  117</span>                <span class="keywordflow">and</span> queue_left_position.empty() <span class="keywordflow">and</span> queue_right_position.empty()</div>
<div class="line"><span class="lineno">  118</span>                <span class="keywordflow">and</span> queue_left_velocity.empty() <span class="keywordflow">and</span> queue_right_velocity.empty()):</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>                state = S3_PRINT_RESULTS</div>
<div class="line"><span class="lineno">  121</span>                <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  123</span>                <span class="comment"># Example data retrieval (commented out in user code)</span></div>
<div class="line"><span class="lineno">  124</span>                <span class="comment"># data_L_pos[idx] = queue_left_position.get()</span></div>
<div class="line"><span class="lineno">  125</span>                <span class="comment"># data_R_pos[idx] = queue_right_position.get()</span></div>
<div class="line"><span class="lineno">  126</span>                <span class="comment"># data_L_vel[idx] = queue_left_velocity.get()</span></div>
<div class="line"><span class="lineno">  127</span>                <span class="comment"># data_R_vel[idx] = queue_right_velocity.get()</span></div>
<div class="line"><span class="lineno">  128</span>                idx += 1</div>
<div class="line"><span class="lineno">  129</span>                <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">elif</span> state == S3_PRINT_RESULTS:</div>
<div class="line"><span class="lineno">  132</span>            print(<span class="stringliteral">&quot;T1 S3 - Printing results (example).&quot;</span>)</div>
<div class="line"><span class="lineno">  133</span>            <span class="comment"># Example printing of stored data (commented out in user code)</span></div>
<div class="line"><span class="lineno">  134</span>            <span class="comment"># for i in range(len(data_L_vel)):</span></div>
<div class="line"><span class="lineno">  135</span>            <span class="comment">#     print(f&quot;{i / points * (run_dur / 1000)}, &quot;</span></div>
<div class="line"><span class="lineno">  136</span>            <span class="comment">#           f&quot;{data_L_pos[i]}, {data_R_pos[i]}, &quot;</span></div>
<div class="line"><span class="lineno">  137</span>            <span class="comment">#           f&quot;{data_L_vel[i]}, {data_R_vel[i]}&quot;)</span></div>
<div class="line"><span class="lineno">  138</span>            state = S4_HOLD</div>
<div class="line"><span class="lineno">  139</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">elif</span> state == S4_HOLD:</div>
<div class="line"><span class="lineno">  142</span>            <span class="comment"># Idle / hold state</span></div>
<div class="line"><span class="lineno">  143</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  146</span>            state = S0_INIT_PARAMS</div>
<div class="line"><span class="lineno">  147</span>            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;State machine in task1_main is in an illegal state. Resetting to S0.&quot;</span>)</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2761433ea92d27cdf41d774ef10220fe" name="a2761433ea92d27cdf41d774ef10220fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2761433ea92d27cdf41d774ef10220fe">&#9670;&#160;</a></span>task2_left_motor_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task2_left_motor_controller </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which controls the left motor using <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> velocity control. </p>
<ul>
<li>Creates a <a class="el" href="class_motor.html" title="A motor driver interface encapsulated in a Python class.">Motor</a> and <a class="el" href="class_encoder.html" title="A quadrature encoder decoding interface.">Encoder</a> object for the left motor. <br  />
</li>
<li>Waits for a start signal before enabling the motor. <br  />
</li>
<li>Once running, updates encoder feedback and computes <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> effort to maintain set velocity.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares</td><td>A tuple of references to the following:<ul>
<li>share_run_dur : Duration to run the motor (ms).</li>
<li>share_left_vel : Desired left motor velocity (counts/second or similar).</li>
<li>share_max_eff : Maximum allowed effort for the motor (unused in original code).</li>
<li>share_cur_left_vel: Current left motor velocity measured by the encoder.</li>
<li>share_wait : A flag (0 or 1) that indicates when to start the motor.</li>
<li>share_stop : A flag (0 or 1) that indicates when to stop the motor. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00150">150</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  150</span><span class="keyword">def </span>task2_left_motor_controller(shares):</div>
<div class="line"><span class="lineno">  151</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">    @brief Task which controls the left motor using PID velocity control.</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  154</span><span class="stringliteral">      - Creates a Motor and Encoder object for the left motor.  </span></div>
<div class="line"><span class="lineno">  155</span><span class="stringliteral">      - Waits for a start signal before enabling the motor.  </span></div>
<div class="line"><span class="lineno">  156</span><span class="stringliteral">      - Once running, updates encoder feedback and computes PID effort to maintain set velocity.</span></div>
<div class="line"><span class="lineno">  157</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  158</span><span class="stringliteral">    @param shares </span></div>
<div class="line"><span class="lineno">  159</span><span class="stringliteral">      A tuple of references to the following:</span></div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">      - share_run_dur     : Duration to run the motor (ms).</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral">      - share_left_vel    : Desired left motor velocity (counts/second or similar).</span></div>
<div class="line"><span class="lineno">  162</span><span class="stringliteral">      - share_max_eff     : Maximum allowed effort for the motor (unused in original code).</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">      - share_cur_left_vel: Current left motor velocity measured by the encoder.</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral">      - share_wait        : A flag (0 or 1) that indicates when to start the motor.</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral">      - share_stop        : A flag (0 or 1) that indicates when to stop the motor.</span></div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  167</span>    (share_run_dur, </div>
<div class="line"><span class="lineno">  168</span>     share_left_vel, </div>
<div class="line"><span class="lineno">  169</span>     share_max_eff, </div>
<div class="line"><span class="lineno">  170</span>     share_cur_left_vel, </div>
<div class="line"><span class="lineno">  171</span>     share_wait, </div>
<div class="line"><span class="lineno">  172</span>     share_stop) = shares</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    <span class="comment"># State machine definitions</span></div>
<div class="line"><span class="lineno">  175</span>    state = 0</div>
<div class="line"><span class="lineno">  176</span>    S0_CREATE_OBJECTS = 0</div>
<div class="line"><span class="lineno">  177</span>    S1_STANDBY = 1</div>
<div class="line"><span class="lineno">  178</span>    S2_RUN = 2</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  181</span>        <span class="keywordflow">if</span> state == S0_CREATE_OBJECTS:</div>
<div class="line"><span class="lineno">  182</span>            print(<span class="stringliteral">&quot;T2 Left Motor - Creating objects.&quot;</span>)</div>
<div class="line"><span class="lineno">  183</span>            Motor_Left = <a class="code hl_class" href="class_motor.html">Motor</a>(motor_left_enable, motor_left_dir, </div>
<div class="line"><span class="lineno">  184</span>                               motor_left_timer, motor_left_channel, </div>
<div class="line"><span class="lineno">  185</span>                               motor_left_pwm)</div>
<div class="line"><span class="lineno">  186</span>            Encoder_Left = <a class="code hl_class" href="class_encoder.html">Encoder</a>(encoder_left_timer, encoder_left_A, encoder_left_B)</div>
<div class="line"><span class="lineno">  187</span>            <span class="comment"># Tuned PID gains for left motor</span></div>
<div class="line"><span class="lineno">  188</span>            PID_Motor_Left = <a class="code hl_class" href="class_p_i_d.html">PID</a>(0.3, 0.009, 0, </div>
<div class="line"><span class="lineno">  189</span>                                 100 / 34.8 / 7.2, </div>
<div class="line"><span class="lineno">  190</span>                                 0.44 / 7.2 * 100, </div>
<div class="line"><span class="lineno">  191</span>                                 integral_error_max=500)</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>            state = S1_STANDBY</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">elif</span> state == S1_STANDBY:</div>
<div class="line"><span class="lineno">  197</span>            <span class="comment"># Wait for the share_wait flag to go low (0) to start</span></div>
<div class="line"><span class="lineno">  198</span>            <span class="keywordflow">if</span> share_wait.get() == 0:</div>
<div class="line"><span class="lineno">  199</span>                print(<span class="stringliteral">&quot;T2 Left Motor - Wait is over, enabling motor.&quot;</span>)</div>
<div class="line"><span class="lineno">  200</span>                Motor_Left.enable()</div>
<div class="line"><span class="lineno">  201</span>                state = S2_RUN</div>
<div class="line"><span class="lineno">  202</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">elif</span> state == S2_RUN:</div>
<div class="line"><span class="lineno">  205</span>            <span class="comment"># Update encoder reading</span></div>
<div class="line"><span class="lineno">  206</span>            Encoder_Left.update()</div>
<div class="line"><span class="lineno">  207</span>            current_velocity = Encoder_Left.get_velocity()</div>
<div class="line"><span class="lineno">  208</span>            share_cur_left_vel.put(current_velocity)</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>            <span class="comment"># Compute new motor effort via PID</span></div>
<div class="line"><span class="lineno">  211</span>            effort = PID_Motor_Left.update(share_left_vel.get(), current_velocity)</div>
<div class="line"><span class="lineno">  212</span>            <span class="comment"># Saturate effort between -100 and 100</span></div>
<div class="line"><span class="lineno">  213</span>            effort = max(min(effort, 100), -100)</div>
<div class="line"><span class="lineno">  214</span>            Motor_Left.set_effort(effort)</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>            <span class="comment"># Check if we should stop</span></div>
<div class="line"><span class="lineno">  217</span>            <span class="keywordflow">if</span> share_stop.get() == 1:</div>
<div class="line"><span class="lineno">  218</span>                print(<span class="stringliteral">&quot;T2 Left Motor - Stop signal received, disabling motor.&quot;</span>)</div>
<div class="line"><span class="lineno">  219</span>                Motor_Left.disable()</div>
<div class="line"><span class="lineno">  220</span>                Motor_Left.set_effort(0)</div>
<div class="line"><span class="lineno">  221</span>                share_run_dur.put(0)</div>
<div class="line"><span class="lineno">  222</span>                share_left_vel.put(0)</div>
<div class="line"><span class="lineno">  223</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  226</span>            <span class="comment"># Error handling</span></div>
<div class="line"><span class="lineno">  227</span>            state = S1_STANDBY</div>
<div class="line"><span class="lineno">  228</span>            print(<span class="stringliteral">&quot;T2 Error - Left Motor Controller&quot;</span>)</div>
<div class="line"><span class="lineno">  229</span>            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;Task2_left_motor_controller in illegal state. Reset to S1.&quot;</span>)</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="ttc" id="aclass_encoder_html"><div class="ttname"><a href="class_encoder.html">Encoder</a></div><div class="ttdoc">A quadrature encoder decoding interface.</div><div class="ttdef"><b>Definition</b> <a href="encoder_8py_source.html#l00015">encoder.py:13</a></div></div>
<div class="ttc" id="aclass_motor_html"><div class="ttname"><a href="class_motor.html">Motor</a></div><div class="ttdoc">A motor driver interface encapsulated in a Python class.</div><div class="ttdef"><b>Definition</b> <a href="motor_8py_source.html#l00014">motor.py:12</a></div></div>
<div class="ttc" id="aclass_p_i_d_html"><div class="ttname"><a href="class_p_i_d.html">PID</a></div><div class="ttdoc">A PID loop encapsulated in a Python class.</div><div class="ttdef"><b>Definition</b> <a href="pid_8py_source.html#l00016">pid.py:14</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7587f108dcb928de84aaf2644f8d8208" name="a7587f108dcb928de84aaf2644f8d8208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7587f108dcb928de84aaf2644f8d8208">&#9670;&#160;</a></span>task3_right_motor_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task3_right_motor_controller </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which controls the right motor using <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> velocity control. </p>
<ul>
<li>Similar to the left motor controller, but for the right motor. <br  />
</li>
<li>Creates <a class="el" href="class_motor.html" title="A motor driver interface encapsulated in a Python class.">Motor</a> and <a class="el" href="class_encoder.html" title="A quadrature encoder decoding interface.">Encoder</a> objects and uses <a class="el" href="class_p_i_d.html" title="A PID loop encapsulated in a Python class.">PID</a> to maintain the desired velocity.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares</td><td>A tuple of references to:<ul>
<li>share_run_dur : Duration to run the motor (ms).</li>
<li>share_right_vel : Desired right motor velocity.</li>
<li>share_cur_right_vel: Current right motor velocity measured by the encoder.</li>
<li>share_wait : A flag indicating when to start the motor.</li>
<li>share_stop : A flag indicating when to stop the motor. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00232">232</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  232</span><span class="keyword">def </span>task3_right_motor_controller(shares):</div>
<div class="line"><span class="lineno">  233</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">    @brief Task which controls the right motor using PID velocity control.</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">      - Similar to the left motor controller, but for the right motor.  </span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">      - Creates Motor and Encoder objects and uses PID to maintain the desired velocity.</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">    @param shares </span></div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral">      A tuple of references to:</span></div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">      - share_run_dur      : Duration to run the motor (ms).</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">      - share_right_vel    : Desired right motor velocity.</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">      - share_cur_right_vel: Current right motor velocity measured by the encoder.</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">      - share_wait         : A flag indicating when to start the motor.</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">      - share_stop         : A flag indicating when to stop the motor.</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  247</span>    (share_run_dur,</div>
<div class="line"><span class="lineno">  248</span>     share_right_vel,</div>
<div class="line"><span class="lineno">  249</span>     share_cur_right_vel,</div>
<div class="line"><span class="lineno">  250</span>     share_wait,</div>
<div class="line"><span class="lineno">  251</span>     share_stop) = shares</div>
<div class="line"><span class="lineno">  252</span>    </div>
<div class="line"><span class="lineno">  253</span>    <span class="comment"># State machine definitions</span></div>
<div class="line"><span class="lineno">  254</span>    state = 0</div>
<div class="line"><span class="lineno">  255</span>    S0_CREATE_OBJECTS = 0</div>
<div class="line"><span class="lineno">  256</span>    S1_STANDBY = 1</div>
<div class="line"><span class="lineno">  257</span>    S2_RUN = 2</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  260</span>        <span class="keywordflow">if</span> state == S0_CREATE_OBJECTS:</div>
<div class="line"><span class="lineno">  261</span>            print(<span class="stringliteral">&quot;T3 Right Motor - Creating objects.&quot;</span>)</div>
<div class="line"><span class="lineno">  262</span>            Motor_Right = <a class="code hl_class" href="class_motor.html">Motor</a>(motor_right_enable, motor_right_dir, </div>
<div class="line"><span class="lineno">  263</span>                                motor_right_timer, motor_right_channel, </div>
<div class="line"><span class="lineno">  264</span>                                motor_right_pwm)</div>
<div class="line"><span class="lineno">  265</span>            Encoder_Right = <a class="code hl_class" href="class_encoder.html">Encoder</a>(encoder_right_timer, encoder_right_A, encoder_right_B)</div>
<div class="line"><span class="lineno">  266</span>            <span class="comment"># Tuned PID gains for right motor</span></div>
<div class="line"><span class="lineno">  267</span>            PID_Motor_Right = <a class="code hl_class" href="class_p_i_d.html">PID</a>(0.3, 0.009, 0, </div>
<div class="line"><span class="lineno">  268</span>                                  100 / 33.7 / 7.2, </div>
<div class="line"><span class="lineno">  269</span>                                  0.49 / 7.2 * 100, </div>
<div class="line"><span class="lineno">  270</span>                                  integral_error_max=500)</div>
<div class="line"><span class="lineno">  271</span>            state = S1_STANDBY</div>
<div class="line"><span class="lineno">  272</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>        <span class="keywordflow">elif</span> state == S1_STANDBY:</div>
<div class="line"><span class="lineno">  275</span>            <span class="keywordflow">if</span> share_wait.get() == 0:</div>
<div class="line"><span class="lineno">  276</span>                print(<span class="stringliteral">&quot;T3 Right Motor - Wait is over, enabling motor.&quot;</span>)</div>
<div class="line"><span class="lineno">  277</span>                Motor_Right.enable()</div>
<div class="line"><span class="lineno">  278</span>                state = S2_RUN</div>
<div class="line"><span class="lineno">  279</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">elif</span> state == S2_RUN:</div>
<div class="line"><span class="lineno">  282</span>            <span class="comment"># Update encoder reading</span></div>
<div class="line"><span class="lineno">  283</span>            Encoder_Right.update()</div>
<div class="line"><span class="lineno">  284</span>            current_velocity = Encoder_Right.get_velocity()</div>
<div class="line"><span class="lineno">  285</span>            share_cur_right_vel.put(current_velocity)</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>            <span class="comment"># Compute PID effort</span></div>
<div class="line"><span class="lineno">  288</span>            effort = PID_Motor_Right.update(share_right_vel.get(), current_velocity)</div>
<div class="line"><span class="lineno">  289</span>            effort = max(min(effort, 100), -100)</div>
<div class="line"><span class="lineno">  290</span>            Motor_Right.set_effort(effort)</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>            <span class="comment"># Check for stop</span></div>
<div class="line"><span class="lineno">  293</span>            <span class="keywordflow">if</span> share_stop.get() == 1:</div>
<div class="line"><span class="lineno">  294</span>                print(<span class="stringliteral">&quot;T3 Right Motor - Stop signal received, disabling motor.&quot;</span>)</div>
<div class="line"><span class="lineno">  295</span>                Motor_Right.disable()</div>
<div class="line"><span class="lineno">  296</span>                Motor_Right.set_effort(0)</div>
<div class="line"><span class="lineno">  297</span>                share_run_dur.put(0)</div>
<div class="line"><span class="lineno">  298</span>                share_right_vel.put(0)</div>
<div class="line"><span class="lineno">  299</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  302</span>            state = S1_STANDBY</div>
<div class="line"><span class="lineno">  303</span>            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;Task3_right_motor_controller in illegal state. Reset to S1.&quot;</span>)</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a40eddb145230fd0b6ebaa9d85a7d328c" name="a40eddb145230fd0b6ebaa9d85a7d328c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40eddb145230fd0b6ebaa9d85a7d328c">&#9670;&#160;</a></span>task4_path_follow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task4_path_follow </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which controls path following for the <a class="el" href="class_romi.html" title="Encapsulates the ROMI chassis kinematics and state.">Romi</a>. </p>
<ul>
<li>Creates <a class="el" href="class_i_m_u.html" title="A class for interacting with a BNO055 IMU over I2C.">IMU</a> and <a class="el" href="class_i_r.html" title="IR sensor interface class for line following on the ROMI chassis.">IR</a> objects, calibrates sensors, and then follows a preset path. <br  />
</li>
<li>Uses scheduled mode changes (<a class="el" href="class_i_r.html" title="IR sensor interface class for line following on the ROMI chassis.">IR</a> line following, heading hold, turn, etc.) based on distance traveled. <br  />
</li>
<li>Utilizes a finite state machine for initialization, calibration, and run modes.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares</td><td>A tuple of references to:<ul>
<li>share_chasssis_vel : Desired chassis velocity (m/s or other unit).</li>
<li>share_left_vel : Desired left motor velocity share (output of path logic).</li>
<li>share_right_vel : Desired right motor velocity share (output of path logic).</li>
<li>share_cur_left_vel : Current left motor velocity.</li>
<li>share_cur_right_vel: Current right motor velocity.</li>
<li>share_wait : A flag for waiting before starting.</li>
<li>share_mode : Holds the current mode (<a class="el" href="class_i_r.html" title="IR sensor interface class for line following on the ROMI chassis.">IR</a>, HEADING, TURN, etc.).</li>
<li>share_heading : Desired heading for heading or turning modes.</li>
<li>share_continue : A flag to let path follow logic continue after certain maneuvers. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00306">306</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  306</span><span class="keyword">def </span>task4_path_follow(shares):</div>
<div class="line"><span class="lineno">  307</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  308</span><span class="stringliteral">    @brief Task which controls path following for the Romi.</span></div>
<div class="line"><span class="lineno">  309</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  310</span><span class="stringliteral">      - Creates IMU and IR objects, calibrates sensors, and then follows a preset path.  </span></div>
<div class="line"><span class="lineno">  311</span><span class="stringliteral">      - Uses scheduled mode changes (IR line following, heading hold, turn, etc.) based on distance traveled.  </span></div>
<div class="line"><span class="lineno">  312</span><span class="stringliteral">      - Utilizes a finite state machine for initialization, calibration, and run modes.</span></div>
<div class="line"><span class="lineno">  313</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  314</span><span class="stringliteral">    @param shares </span></div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral">      A tuple of references to:</span></div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral">      - share_chasssis_vel : Desired chassis velocity (m/s or other unit).</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">      - share_left_vel     : Desired left motor velocity share (output of path logic).</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">      - share_right_vel    : Desired right motor velocity share (output of path logic).</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">      - share_cur_left_vel : Current left motor velocity.</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">      - share_cur_right_vel: Current right motor velocity.</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">      - share_wait         : A flag for waiting before starting.</span></div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">      - share_mode         : Holds the current mode (IR, HEADING, TURN, etc.).</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">      - share_heading      : Desired heading for heading or turning modes.</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral">      - share_continue     : A flag to let path follow logic continue after certain maneuvers.</span></div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  326</span>    (share_chasssis_vel,</div>
<div class="line"><span class="lineno">  327</span>     share_left_vel,</div>
<div class="line"><span class="lineno">  328</span>     share_right_vel,</div>
<div class="line"><span class="lineno">  329</span>     share_cur_left_vel,</div>
<div class="line"><span class="lineno">  330</span>     share_cur_right_vel,</div>
<div class="line"><span class="lineno">  331</span>     share_wait,</div>
<div class="line"><span class="lineno">  332</span>     share_mode,</div>
<div class="line"><span class="lineno">  333</span>     share_heading,</div>
<div class="line"><span class="lineno">  334</span>     share_continue) = shares</div>
<div class="line"><span class="lineno">  335</span>    </div>
<div class="line"><span class="lineno">  336</span>    <span class="comment"># State machine definitions</span></div>
<div class="line"><span class="lineno">  337</span>    state = 0</div>
<div class="line"><span class="lineno">  338</span>    S0_INIT = 0</div>
<div class="line"><span class="lineno">  339</span>    S1_CALIBRATE = 1</div>
<div class="line"><span class="lineno">  340</span>    S2_RUN = 2</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    <span class="comment"># Mode definitions</span></div>
<div class="line"><span class="lineno">  343</span>    MODE_HEADING = 0</div>
<div class="line"><span class="lineno">  344</span>    MODE_IR = 1</div>
<div class="line"><span class="lineno">  345</span>    MODE_TURN = 2</div>
<div class="line"><span class="lineno">  346</span>    MODE_BACKWARD = 3</div>
<div class="line"><span class="lineno">  347</span>    MODE_STOP = 4</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>    <span class="comment"># Example scheduled modes based on distance</span></div>
<div class="line"><span class="lineno">  350</span>    mode_schedule = [</div>
<div class="line"><span class="lineno">  351</span>        (0.00, MODE_IR),</div>
<div class="line"><span class="lineno">  352</span>        (0.9, MODE_HEADING, 90),</div>
<div class="line"><span class="lineno">  353</span>        (1.0, MODE_IR),</div>
<div class="line"><span class="lineno">  354</span>        (3.70, MODE_HEADING, 179),</div>
<div class="line"><span class="lineno">  355</span>        (4.42, MODE_TURN, 270),</div>
<div class="line"><span class="lineno">  356</span>        (4.30, MODE_HEADING, 270),</div>
<div class="line"><span class="lineno">  357</span>        (4.5, MODE_IR),</div>
<div class="line"><span class="lineno">  358</span>    ]</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    mode_schedule2 = [</div>
<div class="line"><span class="lineno">  361</span>        (0.00, MODE_BACKWARD, 0.02),</div>
<div class="line"><span class="lineno">  362</span>        (-0.10, MODE_TURN, 0),</div>
<div class="line"><span class="lineno">  363</span>        (-0.10, MODE_HEADING, 0),</div>
<div class="line"><span class="lineno">  364</span>        (0.3, MODE_TURN, 270),</div>
<div class="line"><span class="lineno">  365</span>        (0.3, MODE_HEADING, 270),</div>
<div class="line"><span class="lineno">  366</span>        (0.53, MODE_TURN, 180),</div>
<div class="line"><span class="lineno">  367</span>        (0.53, MODE_IR),</div>
<div class="line"><span class="lineno">  368</span>        (1, MODE_STOP),</div>
<div class="line"><span class="lineno">  369</span>    ]</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    button = pyb.Pin(blue_button, pyb.Pin.IN, pyb.Pin.PULL_UP)</div>
<div class="line"><span class="lineno">  372</span>    bumper_status = 0</div>
<div class="line"><span class="lineno">  373</span>    share_continue.put(1)</div>
<div class="line"><span class="lineno">  374</span>    turn_gen = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    mode_index = 0</div>
<div class="line"><span class="lineno">  377</span>    test_mode = 0</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">if</span> state == S0_INIT:</div>
<div class="line"><span class="lineno">  381</span>            print(<span class="stringliteral">&quot;T4 Path Follow - Initializing objects.&quot;</span>)</div>
<div class="line"><span class="lineno">  382</span>            imu_obj = <a class="code hl_class" href="class_i_m_u.html">IMU</a>()                   <span class="comment"># IMU for heading</span></div>
<div class="line"><span class="lineno">  383</span>            PID_Omega = <a class="code hl_class" href="class_p_i_d.html">PID</a>(0.08, 0.00, 0.0)  <span class="comment"># PID for angular control</span></div>
<div class="line"><span class="lineno">  384</span>            chassis = <a class="code hl_class" href="class_romi.html">Romi</a>()                  <span class="comment"># Romi chassis for distance/heading</span></div>
<div class="line"><span class="lineno">  385</span>            ir_sensor = <a class="code hl_class" href="class_i_r.html">IR</a>(ir_ctrl, [ir_1, ir_3, ir_5, ir_7])</div>
<div class="line"><span class="lineno">  386</span>            bumper = <a class="code hl_class" href="class_bump.html">Bump</a>(bump0, bump1, bump2, bump3, bump4, bump5)</div>
<div class="line"><span class="lineno">  387</span>            line_follower = <a class="code hl_class" href="class_line_follow.html">LineFollow</a>(ir_sensor)</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>            share_wait.put(1)</div>
<div class="line"><span class="lineno">  390</span>            print(<span class="stringliteral">&quot;IMU object created.&quot;</span>)</div>
<div class="line"><span class="lineno">  391</span>            state = S1_CALIBRATE</div>
<div class="line"><span class="lineno">  392</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>        <span class="keywordflow">elif</span> state == S1_CALIBRATE:</div>
<div class="line"><span class="lineno">  395</span>            <span class="comment"># IMU calibration</span></div>
<div class="line"><span class="lineno">  396</span>            <span class="keywordflow">while</span> imu_obj.startup() == <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  397</span>                <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(1000):</div>
<div class="line"><span class="lineno">  398</span>                    <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>            <span class="comment"># Default IR sensor calibration</span></div>
<div class="line"><span class="lineno">  401</span>            ir_sensor.default_calibration()</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>            print(<span class="stringliteral">&quot;Cal done. Press the blue button to start&quot;</span>)</div>
<div class="line"><span class="lineno">  404</span>            <span class="keywordflow">while</span> button.value() == 1:</div>
<div class="line"><span class="lineno">  405</span>                <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>            imu_obj.set_mode(IMU.NDOF)</div>
<div class="line"><span class="lineno">  408</span>            chassis.zero_heading(imu_obj.read_euler_heading())</div>
<div class="line"><span class="lineno">  409</span>            <span class="keywordflow">if</span> test_mode == 1:</div>
<div class="line"><span class="lineno">  410</span>                chassis.zero_heading(imu_obj.read_euler_heading() + 90)</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>            state = S2_RUN</div>
<div class="line"><span class="lineno">  413</span>            share_wait.put(0)</div>
<div class="line"><span class="lineno">  414</span>            share_chasssis_vel.put(5 * 0.036)  <span class="comment"># Example conversion factor</span></div>
<div class="line"><span class="lineno">  415</span>            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(5):</div>
<div class="line"><span class="lineno">  416</span>                <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  417</span>            chassis.update_time()</div>
<div class="line"><span class="lineno">  418</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">elif</span> state == S2_RUN:</div>
<div class="line"><span class="lineno">  421</span>            <span class="comment"># Check bumper</span></div>
<div class="line"><span class="lineno">  422</span>            bumper.update()</div>
<div class="line"><span class="lineno">  423</span>            <span class="keywordflow">if</span> bumper.get() <span class="keywordflow">and</span> bumper_status == 0:</div>
<div class="line"><span class="lineno">  424</span>                bumper_status = 1</div>
<div class="line"><span class="lineno">  425</span>                chassis.zero_distance()</div>
<div class="line"><span class="lineno">  426</span>                mode_index = 0</div>
<div class="line"><span class="lineno">  427</span>                share_continue.put(1)</div>
<div class="line"><span class="lineno">  428</span>                turn_gen = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  429</span>                print(<span class="stringliteral">&quot;Bumper pressed, switching mode schedules.&quot;</span>)</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>            dist = chassis.get_distance()</div>
<div class="line"><span class="lineno">  432</span>            print(f<span class="stringliteral">&quot;Distance: {dist}&quot;</span>)</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>            <span class="comment"># Switch modes based on distance traveled</span></div>
<div class="line"><span class="lineno">  435</span>            <span class="keywordflow">if</span> bumper_status == 0:</div>
<div class="line"><span class="lineno">  436</span>                <span class="keywordflow">if</span> mode_index &lt; len(mode_schedule) <span class="keywordflow">and</span> dist &gt;= mode_schedule[mode_index][0]:</div>
<div class="line"><span class="lineno">  437</span>                    entry = mode_schedule[mode_index]</div>
<div class="line"><span class="lineno">  438</span>                    new_mode = entry[1]</div>
<div class="line"><span class="lineno">  439</span>                    share_mode.put(new_mode)</div>
<div class="line"><span class="lineno">  440</span>                    print(f<span class="stringliteral">&quot;Switching to mode: {new_mode}&quot;</span>)</div>
<div class="line"><span class="lineno">  441</span>                    <span class="keywordflow">if</span> len(entry) &gt; 2:</div>
<div class="line"><span class="lineno">  442</span>                        share_heading.put(entry[2])</div>
<div class="line"><span class="lineno">  443</span>                        print(f<span class="stringliteral">&quot;Setting heading: {entry[2]}&quot;</span>)</div>
<div class="line"><span class="lineno">  444</span>                    mode_index += 1</div>
<div class="line"><span class="lineno">  445</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  446</span>                <span class="keywordflow">if</span> (mode_index &lt; len(mode_schedule2) </div>
<div class="line"><span class="lineno">  447</span>                    <span class="keywordflow">and</span> dist &gt;= mode_schedule2[mode_index][0] </div>
<div class="line"><span class="lineno">  448</span>                    <span class="keywordflow">and</span> share_continue.get() == 1):</div>
<div class="line"><span class="lineno">  449</span>                    entry = mode_schedule2[mode_index]</div>
<div class="line"><span class="lineno">  450</span>                    new_mode = entry[1]</div>
<div class="line"><span class="lineno">  451</span>                    share_mode.put(new_mode)</div>
<div class="line"><span class="lineno">  452</span>                    print(f<span class="stringliteral">&quot;Switching to mode: {new_mode}&quot;</span>)</div>
<div class="line"><span class="lineno">  453</span>                    <span class="keywordflow">if</span> len(entry) &gt; 2:</div>
<div class="line"><span class="lineno">  454</span>                        share_heading.put(entry[2])</div>
<div class="line"><span class="lineno">  455</span>                        print(f<span class="stringliteral">&quot;Setting heading: {entry[2]}&quot;</span>)</div>
<div class="line"><span class="lineno">  456</span>                    mode_index += 1</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>            current_mode = share_mode.get()</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>            <span class="comment"># Respond to current mode</span></div>
<div class="line"><span class="lineno">  461</span>            <span class="keywordflow">if</span> current_mode == MODE_IR:</div>
<div class="line"><span class="lineno">  462</span>                follow_line(chassis, line_follower,</div>
<div class="line"><span class="lineno">  463</span>                            share_cur_left_vel, share_cur_right_vel,</div>
<div class="line"><span class="lineno">  464</span>                            share_left_vel, share_right_vel,</div>
<div class="line"><span class="lineno">  465</span>                            share_max_vel)</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>            <span class="keywordflow">elif</span> current_mode == MODE_HEADING:</div>
<div class="line"><span class="lineno">  468</span>                heading = share_heading.get()</div>
<div class="line"><span class="lineno">  469</span>                follow_heading(chassis, imu_obj, PID_Omega,</div>
<div class="line"><span class="lineno">  470</span>                               share_chasssis_vel,</div>
<div class="line"><span class="lineno">  471</span>                               share_cur_left_vel, share_cur_right_vel,</div>
<div class="line"><span class="lineno">  472</span>                               share_left_vel, share_right_vel,</div>
<div class="line"><span class="lineno">  473</span>                               share_max_vel, heading)</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>            <span class="keywordflow">elif</span> current_mode == MODE_TURN:</div>
<div class="line"><span class="lineno">  476</span>                turn_angle = share_heading.get()</div>
<div class="line"><span class="lineno">  477</span>                <span class="keywordflow">if</span> turn_gen <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  478</span>                    turn_gen = follow_turn(chassis, imu_obj, PID_Omega,</div>
<div class="line"><span class="lineno">  479</span>                                           share_left_vel, share_right_vel,</div>
<div class="line"><span class="lineno">  480</span>                                           share_max_vel, turn_angle, share_continue)</div>
<div class="line"><span class="lineno">  481</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  482</span>                    next(turn_gen)</div>
<div class="line"><span class="lineno">  483</span>                <span class="keywordflow">except</span> StopIteration:</div>
<div class="line"><span class="lineno">  484</span>                    print(<span class="stringliteral">&quot;Turn completed.&quot;</span>)</div>
<div class="line"><span class="lineno">  485</span>                    turn_gen = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>            <span class="keywordflow">elif</span> current_mode == MODE_BACKWARD:</div>
<div class="line"><span class="lineno">  488</span>                <span class="keywordflow">if</span> turn_gen <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  489</span>                    turn_gen = go_backward(chassis, share_left_vel, share_right_vel,</div>
<div class="line"><span class="lineno">  490</span>                                           share_cur_left_vel.get(), share_cur_right_vel.get(),</div>
<div class="line"><span class="lineno">  491</span>                                           chassis.get_angle(), share_heading.get(),</div>
<div class="line"><span class="lineno">  492</span>                                           share_continue)</div>
<div class="line"><span class="lineno">  493</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  494</span>                    next(turn_gen)</div>
<div class="line"><span class="lineno">  495</span>                <span class="keywordflow">except</span> StopIteration:</div>
<div class="line"><span class="lineno">  496</span>                    print(<span class="stringliteral">&quot;Backward completed.&quot;</span>)</div>
<div class="line"><span class="lineno">  497</span>                    turn_gen = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordflow">elif</span> current_mode == MODE_STOP:</div>
<div class="line"><span class="lineno">  500</span>                <span class="keywordflow">raise</span> KeyboardInterrupt</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  505</span>            state = S0_INIT</div>
<div class="line"><span class="lineno">  506</span>            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;Task4_path_follow in an invalid state. Resetting to S0.&quot;</span>)</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="ttc" id="aclass_bump_html"><div class="ttname"><a href="class_bump.html">Bump</a></div><div class="ttdoc">Encapsulates ROMI bumper switch reading.</div><div class="ttdef"><b>Definition</b> <a href="bump_8py_source.html#l00020">bump.py:18</a></div></div>
<div class="ttc" id="aclass_i_m_u_html"><div class="ttname"><a href="class_i_m_u.html">IMU</a></div><div class="ttdoc">A class for interacting with a BNO055 IMU over I2C.</div><div class="ttdef"><b>Definition</b> <a href="imu_8py_source.html#l00021">imu.py:19</a></div></div>
<div class="ttc" id="aclass_i_r_html"><div class="ttname"><a href="class_i_r.html">IR</a></div><div class="ttdoc">IR sensor interface class for line following on the ROMI chassis.</div><div class="ttdef"><b>Definition</b> <a href="ir_8py_source.html#l00017">ir.py:15</a></div></div>
<div class="ttc" id="aclass_line_follow_html"><div class="ttname"><a href="class_line_follow.html">LineFollow</a></div><div class="ttdoc">Class that computes left/right motor velocities to keep a line sensor&#39;s centroid at center.</div><div class="ttdef"><b>Definition</b> <a href="line__follow_8py_source.html#l00012">line_follow.py:10</a></div></div>
<div class="ttc" id="aclass_romi_html"><div class="ttname"><a href="class_romi.html">Romi</a></div><div class="ttdoc">Encapsulates the ROMI chassis kinematics and state.</div><div class="ttdef"><b>Definition</b> <a href="romi_8py_source.html#l00015">romi.py:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2d15d40756fca616210fcfd4d290b17" name="aa2d15d40756fca616210fcfd4d290b17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d15d40756fca616210fcfd4d290b17">&#9670;&#160;</a></span>task5_bumper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task5_bumper </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple bumper task to demonstrate emergency stop or exit. </p>
<ul>
<li>Monitors the bump sensors and raises KeyboardInterrupt when pressed.</li>
</ul>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">KeyboardInterrupt</td><td>Raises KeyboardInterrupt when a bumper is pressed, causing the main scheduler to stop. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00664">664</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  664</span><span class="keyword">def </span>task5_bumper():</div>
<div class="line"><span class="lineno">  665</span>    <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><span class="lineno">  666</span><span class="stringliteral">    @brief Simple bumper task to demonstrate emergency stop or exit.</span></div>
<div class="line"><span class="lineno">  667</span><span class="stringliteral">    @details </span></div>
<div class="line"><span class="lineno">  668</span><span class="stringliteral">      - Monitors the bump sensors and raises KeyboardInterrupt when pressed.</span></div>
<div class="line"><span class="lineno">  669</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  670</span><span class="stringliteral">    @exception KeyboardInterrupt </span></div>
<div class="line"><span class="lineno">  671</span><span class="stringliteral">      Raises KeyboardInterrupt when a bumper is pressed, causing the main scheduler to stop.</span></div>
<div class="line"><span class="lineno">  672</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  673</span>    state = 0</div>
<div class="line"><span class="lineno">  674</span>    S0_INIT = 0</div>
<div class="line"><span class="lineno">  675</span>    S1_WAIT_FOR_PRESS = 1</div>
<div class="line"><span class="lineno">  676</span>    S2_CRASH_OUT = 2</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  679</span>        <span class="keywordflow">if</span> state == S0_INIT:</div>
<div class="line"><span class="lineno">  680</span>            bumper = <a class="code hl_class" href="class_bump.html">Bump</a>(bump0, bump1, bump2, bump3, bump4, bump5)</div>
<div class="line"><span class="lineno">  681</span>            state = S1_WAIT_FOR_PRESS</div>
<div class="line"><span class="lineno">  682</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>        <span class="keywordflow">elif</span> state == S1_WAIT_FOR_PRESS:</div>
<div class="line"><span class="lineno">  685</span>            bumper.update()</div>
<div class="line"><span class="lineno">  686</span>            <span class="keywordflow">if</span> bumper.get():</div>
<div class="line"><span class="lineno">  687</span>                print(<span class="stringliteral">&quot;Bumper pressed&quot;</span>)</div>
<div class="line"><span class="lineno">  688</span>                state = S2_CRASH_OUT</div>
<div class="line"><span class="lineno">  689</span>            <span class="keywordflow">yield</span> state</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>        <span class="keywordflow">elif</span> state == S2_CRASH_OUT:</div>
<div class="line"><span class="lineno">  692</span>            <span class="keywordflow">raise</span> KeyboardInterrupt</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  695</span>            state = S0_INIT</div>
<div class="line"><span class="lineno">  696</span>            <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;task5_bumper in invalid state. Reset to S0.&quot;</span>)</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac444a2dc99b98409a8b2fcff38ae4b6f" name="ac444a2dc99b98409a8b2fcff38ae4b6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac444a2dc99b98409a8b2fcff38ae4b6f">&#9670;&#160;</a></span>Motor_Left</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.Motor_Left</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="class_motor.html">Motor</a>(motor_left_enable, motor_left_dir,</div>
<div class="line"><span class="lineno">    2</span>                               motor_left_timer, motor_left_channel,</div>
<div class="line"><span class="lineno">    3</span>                               motor_left_pwm)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00839">839</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ab40f26627816d82bd72f3a65ed8d82d5" name="ab40f26627816d82bd72f3a65ed8d82d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40f26627816d82bd72f3a65ed8d82d5">&#9670;&#160;</a></span>Motor_Right</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.Motor_Right</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="class_motor.html">Motor</a>(motor_right_enable, motor_right_dir,</div>
<div class="line"><span class="lineno">    2</span>                                motor_right_timer, motor_right_channel,</div>
<div class="line"><span class="lineno">    3</span>                                motor_right_pwm)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00836">836</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a6e2a6db2039ceb5e06ab4c5c4c9c7905" name="a6e2a6db2039ceb5e06ab4c5c4c9c7905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e2a6db2039ceb5e06ab4c5c4c9c7905">&#9670;&#160;</a></span>q_len</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main.q_len = 500</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00727">727</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a0e7bff739a6d43426790064d7604e67d" name="a0e7bff739a6d43426790064d7604e67d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e7bff739a6d43426790064d7604e67d">&#9670;&#160;</a></span>queue_left_position</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.queue_left_position</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classtask__share_1_1_queue.html">task_share.Queue</a>(<span class="stringliteral">&#39;l&#39;</span>, q_len, thread_protect=<span class="keyword">False</span>, </div>
<div class="line"><span class="lineno">    2</span>                                           overwrite=<span class="keyword">False</span>, name=<span class="stringliteral">&quot;Queue_Left_Position&quot;</span>)</div>
<div class="ttc" id="aclasstask__share_1_1_queue_html"><div class="ttname"><a href="classtask__share_1_1_queue.html">task_share.Queue</a></div><div class="ttdoc">A FIFO queue to transfer data between tasks.</div><div class="ttdef"><b>Definition</b> <a href="task__share_8py_source.html#l00067">task_share.py:67</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00728">728</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ac132acf5ce2695046aab857080b66583" name="ac132acf5ce2695046aab857080b66583"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac132acf5ce2695046aab857080b66583">&#9670;&#160;</a></span>queue_left_velocity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.queue_left_velocity</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classtask__share_1_1_queue.html">task_share.Queue</a>(<span class="stringliteral">&#39;f&#39;</span>, q_len, thread_protect=<span class="keyword">False</span>, </div>
<div class="line"><span class="lineno">    2</span>                                           overwrite=<span class="keyword">False</span>, name=<span class="stringliteral">&quot;Queue_Left_Velocity&quot;</span>)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00730">730</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a2346a11ae4ce661ea9831ecf2448a953" name="a2346a11ae4ce661ea9831ecf2448a953"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2346a11ae4ce661ea9831ecf2448a953">&#9670;&#160;</a></span>queue_right_position</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.queue_right_position</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classtask__share_1_1_queue.html">task_share.Queue</a>(<span class="stringliteral">&#39;l&#39;</span>, q_len, thread_protect=<span class="keyword">False</span>, </div>
<div class="line"><span class="lineno">    2</span>                                            overwrite=<span class="keyword">False</span>, name=<span class="stringliteral">&quot;Queue_Right_Position&quot;</span>)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00732">732</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ada0b9312c38b796722d0c99246ce7ab5" name="ada0b9312c38b796722d0c99246ce7ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada0b9312c38b796722d0c99246ce7ab5">&#9670;&#160;</a></span>queue_right_velocity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.queue_right_velocity</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classtask__share_1_1_queue.html">task_share.Queue</a>(<span class="stringliteral">&#39;f&#39;</span>, q_len, thread_protect=<span class="keyword">False</span>, </div>
<div class="line"><span class="lineno">    2</span>                                            overwrite=<span class="keyword">False</span>, name=<span class="stringliteral">&quot;Queue_Right_Velocity&quot;</span>)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00734">734</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a2900c777cd73ccd2e665b2603ad46578" name="a2900c777cd73ccd2e665b2603ad46578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2900c777cd73ccd2e665b2603ad46578">&#9670;&#160;</a></span>share_chassis_vel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_chassis_vel = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Chassis_Vel&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00752">752</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a7b1b6e7dc901fe09579cd581a2f71bcf" name="a7b1b6e7dc901fe09579cd581a2f71bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b1b6e7dc901fe09579cd581a2f71bcf">&#9670;&#160;</a></span>share_continue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_continue = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Continue&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00773">773</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a256212a1b054fb7db00764673da653e3" name="a256212a1b054fb7db00764673da653e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256212a1b054fb7db00764673da653e3">&#9670;&#160;</a></span>share_cur_left_vel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_cur_left_vel = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Cur_Left_Vel&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00755">755</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a08923618ea52835930772297cbca5586" name="a08923618ea52835930772297cbca5586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08923618ea52835930772297cbca5586">&#9670;&#160;</a></span>share_cur_right_vel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_cur_right_vel = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Cur_Right_Vel&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00758">758</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a7f5ea24393ebcd9c0dc95fe5b1566474" name="a7f5ea24393ebcd9c0dc95fe5b1566474"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f5ea24393ebcd9c0dc95fe5b1566474">&#9670;&#160;</a></span>share_dir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_dir = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Dir&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00749">749</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ab2e61c14a17da80ea8b6de8c12d06b6c" name="ab2e61c14a17da80ea8b6de8c12d06b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2e61c14a17da80ea8b6de8c12d06b6c">&#9670;&#160;</a></span>share_heading</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_heading = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Heading&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00770">770</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a4b3538bf858b55ad25f6aa62bc0a59aa" name="a4b3538bf858b55ad25f6aa62bc0a59aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3538bf858b55ad25f6aa62bc0a59aa">&#9670;&#160;</a></span>share_left_effort</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_left_effort = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Left_Effort&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00715">715</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ad083741762dd7eca5deef385687f6e2e" name="ad083741762dd7eca5deef385687f6e2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad083741762dd7eca5deef385687f6e2e">&#9670;&#160;</a></span>share_left_run_dur</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_left_run_dur = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Left_Run_Dur&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00718">718</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a2be8f3bce68f849361ad0518974ac5d4" name="a2be8f3bce68f849361ad0518974ac5d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2be8f3bce68f849361ad0518974ac5d4">&#9670;&#160;</a></span>share_left_vel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_left_vel = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Left_Vel&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00746">746</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="af7bc4ff58722c6affeee262012fcf55c" name="af7bc4ff58722c6affeee262012fcf55c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7bc4ff58722c6affeee262012fcf55c">&#9670;&#160;</a></span>share_max_eff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_max_eff = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Max_Eff&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00740">740</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a01cd60f30f626766e9e8b21e509ce05c" name="a01cd60f30f626766e9e8b21e509ce05c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01cd60f30f626766e9e8b21e509ce05c">&#9670;&#160;</a></span>share_max_vel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_max_vel = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Max_Vel&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00737">737</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ac1648ed9341de347f664c2c000bd537c" name="ac1648ed9341de347f664c2c000bd537c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1648ed9341de347f664c2c000bd537c">&#9670;&#160;</a></span>share_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_mode = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Mode&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00767">767</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a0456cb15cb03d0782a60ebea1c6e6655" name="a0456cb15cb03d0782a60ebea1c6e6655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0456cb15cb03d0782a60ebea1c6e6655">&#9670;&#160;</a></span>share_motor_controller_period</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_motor_controller_period</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classtask__share_1_1_share.html">task_share.Share</a>(<span class="stringliteral">&#39;i&#39;</span>, thread_protect=<span class="keyword">False</span>, </div>
<div class="line"><span class="lineno">    2</span>                                                     name=<span class="stringliteral">&quot;Share_Left_Motor_Controller_Period&quot;</span>)</div>
<div class="ttc" id="aclasstask__share_1_1_share_html"><div class="ttname"><a href="classtask__share_1_1_share.html">task_share.Share</a></div><div class="ttdoc">A single shared data item (thread-safe if needed).</div><div class="ttdef"><b>Definition</b> <a href="task__share_8py_source.html#l00211">task_share.py:211</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00711">711</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a75aff43a1280bd518cb4cfc2b3990181" name="a75aff43a1280bd518cb4cfc2b3990181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75aff43a1280bd518cb4cfc2b3990181">&#9670;&#160;</a></span>share_right_effort</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_right_effort = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Right_Effort&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00721">721</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ab11938f316cca0a507bc9652a1421ce2" name="ab11938f316cca0a507bc9652a1421ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab11938f316cca0a507bc9652a1421ce2">&#9670;&#160;</a></span>share_right_run_dur</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_right_run_dur = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Right_Run_Dur&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00724">724</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="aaf225447dd3b4f71c7c58cae495c7abf" name="aaf225447dd3b4f71c7c58cae495c7abf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf225447dd3b4f71c7c58cae495c7abf">&#9670;&#160;</a></span>share_right_vel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_right_vel = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('f', thread_protect=False, name=&quot;Share_Right_Vel&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00743">743</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="abe9060a06cf51d73765d64230ef0c465" name="abe9060a06cf51d73765d64230ef0c465"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe9060a06cf51d73765d64230ef0c465">&#9670;&#160;</a></span>share_stop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_stop = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Stop&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00764">764</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="aa47776161cc656417f2687bd51eaec13" name="aa47776161cc656417f2687bd51eaec13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47776161cc656417f2687bd51eaec13">&#9670;&#160;</a></span>share_wait</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.share_wait = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Share_Wait&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00761">761</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="af4b8f4290f8d32e70654f6deb864787f" name="af4b8f4290f8d32e70654f6deb864787f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b8f4290f8d32e70654f6deb864787f">&#9670;&#160;</a></span>task1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(</div>
<div class="line"><span class="lineno">    2</span>        task1_main, name=<span class="stringliteral">&quot;Task_1&quot;</span>, priority=1, period=30,</div>
<div class="line"><span class="lineno">    3</span>        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">    4</span>        shares=(</div>
<div class="line"><span class="lineno">    5</span>            share_motor_controller_period, share_left_effort, share_right_effort,</div>
<div class="line"><span class="lineno">    6</span>            share_left_run_dur, share_left_run_dur, queue_left_position,</div>
<div class="line"><span class="lineno">    7</span>            queue_right_position, queue_left_velocity, queue_right_velocity,</div>
<div class="line"><span class="lineno">    8</span>            share_cur_left_vel, share_cur_right_vel</div>
<div class="line"><span class="lineno">    9</span>        )</div>
<div class="line"><span class="lineno">   10</span>    )</div>
<div class="ttc" id="aclasscotask_1_1_task_html"><div class="ttname"><a href="classcotask_1_1_task.html">cotask.Task</a></div><div class="ttdoc">Implements multitasking with scheduling and some performance logging.</div><div class="ttdef"><b>Definition</b> <a href="cotask_8py_source.html#l00066">cotask.py:66</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00777">777</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a99d189b8f9eb3784cf7d4e5c3241b562" name="a99d189b8f9eb3784cf7d4e5c3241b562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99d189b8f9eb3784cf7d4e5c3241b562">&#9670;&#160;</a></span>task2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task2</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(</div>
<div class="line"><span class="lineno">    2</span>        task2_left_motor_controller, name=<span class="stringliteral">&quot;Task_2&quot;</span>, priority=2,</div>
<div class="line"><span class="lineno">    3</span>        period=share_motor_controller_period.get(), profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">    4</span>        shares=(</div>
<div class="line"><span class="lineno">    5</span>            share_left_run_dur, share_left_vel, share_max_eff,</div>
<div class="line"><span class="lineno">    6</span>            share_cur_left_vel, share_wait, share_stop</div>
<div class="line"><span class="lineno">    7</span>        )</div>
<div class="line"><span class="lineno">    8</span>    )</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00788">788</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a120516a5d42c212c898d4616d266077a" name="a120516a5d42c212c898d4616d266077a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120516a5d42c212c898d4616d266077a">&#9670;&#160;</a></span>task3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task3</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(</div>
<div class="line"><span class="lineno">    2</span>        task3_right_motor_controller, name=<span class="stringliteral">&quot;Task_3&quot;</span>, priority=2,</div>
<div class="line"><span class="lineno">    3</span>        period=share_motor_controller_period.get(), profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">    4</span>        shares=(</div>
<div class="line"><span class="lineno">    5</span>            share_right_run_dur, share_right_vel, share_cur_right_vel,</div>
<div class="line"><span class="lineno">    6</span>            share_wait, share_stop</div>
<div class="line"><span class="lineno">    7</span>        )</div>
<div class="line"><span class="lineno">    8</span>    )</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00797">797</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="ac0ee3c5b5359f76becfe27534e82085f" name="ac0ee3c5b5359f76becfe27534e82085f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0ee3c5b5359f76becfe27534e82085f">&#9670;&#160;</a></span>task4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task4</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(</div>
<div class="line"><span class="lineno">    2</span>        task4_path_follow, name=<span class="stringliteral">&quot;Task_4&quot;</span>, priority=3, period=200,</div>
<div class="line"><span class="lineno">    3</span>        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">    4</span>        shares=(</div>
<div class="line"><span class="lineno">    5</span>            share_chassis_vel, share_left_vel, share_right_vel,</div>
<div class="line"><span class="lineno">    6</span>            share_cur_left_vel, share_cur_right_vel, share_wait,</div>
<div class="line"><span class="lineno">    7</span>            share_mode, share_heading, share_continue</div>
<div class="line"><span class="lineno">    8</span>        )</div>
<div class="line"><span class="lineno">    9</span>    )</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00806">806</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
<a id="a11ec9e490c402876467b9fdadecc93e8" name="a11ec9e490c402876467b9fdadecc93e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ec9e490c402876467b9fdadecc93e8">&#9670;&#160;</a></span>task5</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task5</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(</div>
<div class="line"><span class="lineno">    2</span>        task5_bumper, name=<span class="stringliteral">&quot;Task_5&quot;</span>, priority=4, period=1000</div>
<div class="line"><span class="lineno">    3</span>    )</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="main_8py_source.html#l00816">816</a> of file <a class="el" href="main_8py_source.html">main.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8py.html">main.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
